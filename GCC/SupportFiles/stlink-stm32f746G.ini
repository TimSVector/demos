set print elements 0
set print null-stop
set auto-solib-add on
set confirm no
set pagination off
target remote ${VCAST_GDB_IP_ADDR}:${VCAST_GDB_PORT_NUM}
file vcast.elf
load vcast.elf

set *(int *)0xE000ED14=*(int *)0xE000ED14|0x10
set *(unsigned int *)0xe0042004|=0x7

echo vcast.elf loaded...\n\n
if ${VCAST_DEBUG_FLAG} == 1
    break "main"
    break "vCAST_END"
    break ${VCV_SUBPROGRAM_NAME}
    echo \nA breakpoint has been set on ${VCV_SUBPROGRAM_NAME}. Type continue and execution should halt at ${VCV_SUBPROGRAM_NAME}.\n\n
else
    break "vCAST_END"
      commands
        silent
        printf "%s",vcast_output_buffer
        quit
      end
    break "vcastHaltDebugger"
      commands
        silent
        printf "%s",vcast_output_buffer
        continue
      end
    catch signal
      commands
        silent
        printf "%s",vcast_output_buffer
        printf "caught exception"
        printf "Backtrace"
        bt
        quit
      end
end
continue
